import{h as I}from"./hooks.module-10a4f742.js";import{o as e}from"./jsxRuntime.module-8e7d8b33.js";import{T as y}from"./Textarea-3ea8ae58.js";/* empty css                    */import{N as u,P as c,D as P,I as v,F as C}from"./constants-6ab425e5.js";import{a as K}from"./utils-73df6dec.js";import{R as k}from"./RadioButtons-900e0ac3.js";import"./preact.module-4f38c496.js";const p=({showDays:t=!0,value:a,onChange:n})=>e("div",{className:"flex mb-4",children:[t&&e("label",{className:"mr-2",children:[e("p",{children:"Day"}),e("input",{type:"text",value:a.day||"",onChange:o=>n({...a,day:o.currentTarget.value}),className:"border-2 border-black w-10 focus:outline-offset-2 focus:outline-2 focus:outline-yellow-400"})]}),e("label",{className:"mx-2",children:[e("p",{children:"Month"}),e("input",{type:"text",value:a.month||"",onChange:o=>n({...a,month:o.currentTarget.value}),className:"border-2 border-black w-10 focus:outline-offset-2 focus:outline-2 focus:outline-yellow-400"})]}),e("label",{className:"mx-2",children:[e("p",{children:"Year"}),e("input",{type:"text",value:a.year||"",onChange:o=>n({...a,year:o.currentTarget.value}),className:"border-2 border-black w-20 focus:outline-offset-2 focus:outline-2 focus:outline-yellow-400"})]})]}),J=({value:t,onChange:a})=>e("div",{className:"flex flex-col",children:[e("h1",{className:"my-6 text-3xl font-bold",children:"Summary text"}),e("p",{className:"text-sm mb-2 text-gray-600",children:"Keep this specific to your own Local Plan"}),e(y,{value:t,onChange:a,maxLength:400})]}),N="landing",T="title",D="description",m="publishDate",s="scoping",i="gateway1",S="export",b={day:"",month:"",year:""},g={startDate:b,endDate:b,progress:u,additionalInformation:""},_={[T]:"",[D]:"",[m]:b,[s]:g,[i]:g},B=t=>{const a=W(t);return`data:text/json;charset=urf-8, ${encodeURIComponent(JSON.stringify(a))}`},j=async t=>K(t).then(a=>M(a)),M=t=>({...t,[m]:x(t.publishDate),[s]:L(s,t.stages),[i]:L(i,t.stages)}),L=(t,a)=>{const n=a.find(o=>o.key===t);return n?H(n):g},H=t=>({...t,startDate:x(t.startDate),endDate:x(t.endDate)}),x=t=>{const a=new Date(t);return{day:a.getDate().toString(),month:(a.getMonth()+1).toString(),year:a.getFullYear().toString()}},W=t=>({title:t.title,description:t.description,publishDate:f(t.publishDate),updated:"",status:"",periodStartToEnd:"",coverage:"",stages:[O(s,"Scoping and early participation",t[s]),O(i,"Gateway 1. Check-point",t[i])]}),O=(t,a,n)=>({key:t,name:a,startDate:f(n.startDate),endDate:f(n.endDate),progress:n.progress,additionalInformation:n.additionalInformation}),f=t=>{const a=t.year?parseInt(t.year):new Date().getFullYear(),n=t.month?parseInt(t.month)-1:0,o=t.day?parseInt(t.day):1;return new Date(a,n,o).getTime()},X=({value:t})=>{const a=B(t);return e("div",{children:[e("h1",{className:"my-6 text-3xl font-bold",children:"Export your timetable to JSON"}),e("p",{className:"w-2/3 mb-4",children:"When you have completed all the details, you can export your data into a JSON file that can generate the DLUHC TImetable Template on your website."}),e("p",{className:"text-blue-400 underline mb-4",children:"Read more about how to publish Timetable JSON data online"}),e("a",{role:"button",type:"button",className:"bg-green-700 hover:bg-green-800 text-white py-1 px-2",href:a,download:"timetable.json",children:"Export Timetable JSON"})]})},$=({value:t,onChange:a})=>e("div",{className:"flex flex-col",children:[e("h1",{className:"my-6 text-3xl font-bold",children:"Timetable published date"}),e("p",{className:"w-1/2",children:"This is the date this version of your timetable will be published publicly online"}),e("p",{className:"text-sm mt-4 mb-2 text-gray-600",children:"For example, 21 3 2025"}),e(p,{value:t,onChange:a})]}),q=[{label:c[u],value:u},{label:c[P],value:P},{label:c[v],value:v},{label:c[C],value:C}],A=({stageName:t,value:a,onChange:n})=>e("div",{className:"flex flex-col",children:[e("h1",{className:"my-2 text-4xl font-bold",children:t}),e("div",{className:"my-2",children:[e("h2",{className:"text-2xl font-bold",children:"Start date"}),e("p",{children:"For example, 3 2025"}),e(p,{value:a.startDate,onChange:o=>n({...a,startDate:o}),showDays:!1})]}),e("div",{className:"my-2",children:[e("h2",{className:"text-2xl font-bold",children:"End date"}),e(p,{value:a.endDate,onChange:o=>n({...a,endDate:o}),showDays:!1})]}),e("div",{className:"my-2",children:[e("h2",{className:"text-2xl font-bold",children:"Progress"}),e(k,{options:q,value:a.progress,onChange:o=>n({...a,progress:o})})]}),e("div",{className:"my-2",children:[e("h2",{className:"text-2xl font-bold",children:"Additional information (optional)"}),e(y,{value:a.additionalInformation,onChange:o=>n({...a,additionalInformation:o}),maxLength:100})]})]}),z=({value:t,onChange:a})=>e("div",{className:"flex flex-col",children:[e("h1",{className:"my-6 text-3xl font-bold",children:"Local Plan title"}),e("p",{className:"text-sm mb-2 text-gray-600",children:"Such as Birmingham City 2025-2040 Local Plan timetable"}),e(y,{value:t,onChange:a,maxLength:100})]}),Q=async t=>{if(!t||t.length===0)return;const a=URL.createObjectURL(t[0]);return await j(a)},Z=({onContinueClick:t,onUploadTimetable:a})=>{const n=async o=>{const l=await Q(o);l&&a(l)};return e("div",{className:"flex flex-col",children:[e("h1",{className:"my-6 text-3xl font-bold",children:"Local Plan Timetable Generation Form"}),e("p",{className:" mb-2 text-gray-600 w-6/12",children:"This form can support you in the creation and publishing of a Local Plan Timetable."}),e("p",{className:"text-blue-400 underline",children:"Read more about how to publish Timetable CSV data online"}),e("div",{children:e("button",{className:"bg-green-700 hover:bg-green-800 text-white py-1 px-2 my-4",onClick:t,children:"Start a new timetable"})}),e("div",{children:e("label",{type:"button",role:"button",className:"bg-green-700 hover:bg-green-800 text-white py-1 px-2",children:["Upload and edit an exisiting timetable",e("input",{hidden:!0,type:"file",accept:"text/json",onChange:o=>n(o.currentTarget.files)})]})})]})},V=7,ee=(t,a,n,o,l)=>{switch(t){case N:return e(Z,{onContinueClick:o,onUploadTimetable:l});case T:return e(z,{value:a[t],onChange:r=>n(t,r)});case D:return e(J,{value:a[t],onChange:r=>n(t,r)});case m:return e($,{value:a[t],onChange:r=>n(t,r)});case s:return e(A,{stageName:"Scoping and early participation",value:a[t],onChange:r=>n(t,r)});case i:return e(A,{stageName:"Gateway 1. Check-point",value:a[t],onChange:r=>n(t,r)});case S:return e(X,{value:a});default:return null}},te=[N,T,D,m,s,i,S],ae=()=>{const[t,a]=I(_),[n,o]=I(0),l=te[n],r=(h,U)=>{a({...t,[h]:U})},G=()=>{n!==0&&o(n-1)},w=()=>{n===0&&a(_),n<V-1&&o(n+1)},E=ee(l,t,r,w,h=>{a(h),o(n+1)});return e("div",{children:l!==N?e("div",{children:[e("div",{children:["<",e("p",{className:"underline hover:decoration-2 py-1 px-2 inline-block cursor-pointer",onClick:G,children:"Back"})]}),e("div",{children:E}),l!==S&&e("button",{className:"bg-green-700 hover:bg-green-800 text-white py-1 px-2",onClick:w,children:"Continue"})]}):e("div",{children:E})})},ne=ae,ue={component:ne,title:"SOW14/Timetable Form",tags:["autodocs"]},d={args:{}};var R,F,Y;d.parameters={...d.parameters,docs:{...(R=d.parameters)==null?void 0:R.docs,source:{originalSource:`{
  args: {}
}`,...(Y=(F=d.parameters)==null?void 0:F.docs)==null?void 0:Y.source}}};const pe=["Default"];export{d as Default,pe as __namedExportsOrder,ue as default};
//# sourceMappingURL=TimetableForm.stories-aaca3cf4.js.map
