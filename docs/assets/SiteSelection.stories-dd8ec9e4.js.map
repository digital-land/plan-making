{"version":3,"file":"SiteSelection.stories-dd8ec9e4.js","sources":["../../src/components/siteSelectionForm/components/FormPage.tsx","../../src/components/siteSelectionForm/components/MultiSelect.tsx","../../src/components/siteSelectionForm/components/DynamicForm.tsx","../../src/components/siteSelectionForm/SiteSelectionForm.tsx"],"sourcesContent":["import { ComponentChildren } from \"preact\";\n\ninterface FormPageProps {\n  children?: ComponentChildren;\n  title: string;\n  subtitle?: string;\n  onBackClicked: () => void;\n  onContinueClicked: () => void;\n}\n\nconst FormPage = ({\n  children,\n  title,\n  subtitle,\n  onBackClicked,\n  onContinueClicked,\n}: FormPageProps) => {\n  return (\n    <div>\n      <div className=\"form-page-header mb-4\">\n        <h1 className=\"my-2 text-4xl font-bold\">{title}</h1>\n        {subtitle && <p>{subtitle}</p>}\n      </div>\n      <div className=\"form-page-body mb-4\">{children}</div>\n      <div className=\"form-page-footer mt-10 flex space-x-6\">\n        <button\n          className=\"bg-gray-200 hover:bg-gray-300 text-black py-1 px-2\"\n          onClick={onBackClicked}\n        >\n          Back\n        </button>\n        <button\n          className=\"bg-green-700 hover:bg-green-800 text-white py-1 px-2\"\n          onClick={onContinueClicked}\n        >\n          Save and continue\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default FormPage;\n","interface MultiSelectProps {\n  values: ReadonlyArray<String>;\n}\n\nconst MultiSelect = ({ values }: MultiSelectProps) => {\n  if (!values.length) {\n    return null;\n  }\n\n  const options = values.map((value) => (\n    <div key={value} className=\"flex items-center mb-4\">\n      <input type=\"checkbox\" class=\"checkbox\" />\n      <label className=\"ml-2 font-semibold\">{value}</label>\n    </div>\n  ));\n\n  return <div>{options}</div>;\n};\n\nexport default MultiSelect;\n","import { FormStage } from \"../types\";\nimport FormPage from \"./FormPage\";\nimport MultiSelect from \"./MultiSelect\";\n\ninterface DynamicFormProps {\n  data: FormStage;\n  onBackClicked: () => void;\n  onContinueClicked: () => void;\n}\n\nenum InputType {\n  Input,\n  MultiSelect,\n  None,\n}\n\nconst getInputType = (data: FormStage) => {\n  if (data.type === \"string\") {\n    return data.enum ? InputType.MultiSelect : InputType.Input;\n  }\n\n  return InputType.None;\n};\n\nconst DynamicForm = ({\n  data,\n  onBackClicked,\n  onContinueClicked,\n}: DynamicFormProps) => {\n  let questionInputComponent = null;\n\n  const inputType = getInputType(data);\n\n  switch (inputType) {\n    case InputType.MultiSelect:\n      questionInputComponent = (\n        <MultiSelect values={data.enum as ReadonlyArray<string>} />\n      );\n      break;\n  }\n\n  return (\n    <FormPage\n      title={data.title}\n      subtitle={data.subtitle}\n      onBackClicked={onBackClicked}\n      onContinueClicked={onContinueClicked}\n    >\n      <div>{questionInputComponent}</div>\n    </FormPage>\n  );\n};\n\nexport default DynamicForm;\n","import { useState, useEffect, useMemo } from \"preact/hooks\";\nimport { loadJson } from \"../../utils\";\nimport DynamicForm from \"./components/DynamicForm\";\nimport { SiteSelectionFormSchema } from \"./types\";\n\nimport \"./SiteSelectionForm.css\";\n\ninterface SiteSelectionForm {\n  filepath?: string;\n  data?: SiteSelectionFormSchema;\n}\n\nconst SiteSelectionForm = ({ filepath, data }: SiteSelectionForm) => {\n  const [formSchema, setFormSchema] =\n    useState<SiteSelectionFormSchema | null>();\n\n  const [currentStage, setCurrentStage] = useState(0);\n\n  useEffect(() => {\n    if (data) {\n      setFormSchema(data);\n    } else if (filepath) {\n      loadJson(filepath).then((data) => {\n        setFormSchema(data);\n      });\n    } else {\n      setFormSchema(null);\n    }\n  }, [setFormSchema, filepath, data]);\n\n  if (!formSchema) {\n    return null;\n  }\n\n  const propertyKeys = useMemo(\n    () => Object.keys(formSchema.properties),\n    [formSchema],\n  );\n\n  const handleBackClicked = () => {\n    if (!formSchema || currentStage <= 0) {\n      // TODO handle error here, button shouldnt be displayed too\n      return;\n    }\n\n    setCurrentStage(currentStage - 1);\n  };\n\n  const handleContinueClicked = () => {\n    if (!formSchema || currentStage >= propertyKeys.length - 1) {\n      // TODO handle error here, button shouldnt be displayed too\n      return;\n    }\n\n    setCurrentStage(currentStage + 1);\n  };\n\n  return (\n    <DynamicForm\n      data={formSchema.properties[propertyKeys[currentStage]]}\n      onBackClicked={handleBackClicked}\n      onContinueClicked={handleContinueClicked}\n    />\n  );\n};\n\nexport default SiteSelectionForm;\n"],"names":["FormPage","children","title","subtitle","onBackClicked","onContinueClicked","_jsxs","className","_jsx","onClick","MultiSelect","values","length","options","map","value","type","class","getInputType","data","enum","InputType","DynamicForm","questionInputComponent","SiteSelectionForm","filepath","formSchema","setFormSchema","useState","currentStage","setCurrentStage","useEffect","loadJson","then","propertyKeys","useMemo","Object","keys","properties","handleBackClicked","handleContinueClicked","SiteSelection"],"mappings":"6LAUA,MAAMA,EAAWA,CAAC,CAChBC,SAAAA,EACAC,MAAAA,EACAC,SAAAA,EACAC,cAAAA,EACAC,kBAAAA,CACa,IAEXC,EAAA,MAAA,CAAAL,UACEK,EAAA,MAAA,CAAKC,UAAU,wBAAuBN,UACpCO,EAAA,KAAA,CAAID,UAAU,0BAAyBN,SAAEC,CAAAA,CAAU,EAClDC,GAAYK,EAAA,IAAA,CAAAP,SAAIE,CAAAA,CAAY,CAAC,CAAA,CAC3B,EACLK,EAAA,MAAA,CAAKD,UAAU,sBAAqBN,SAAAA,CAAAA,CAAgB,EACpDK,EAAA,MAAA,CAAKC,UAAU,wCAAuCN,UACpDO,EAAA,SAAA,CACED,UAAU,qDACVE,QAASL,EAAcH,SACxB,MAAA,CAEO,EACRO,EAAA,SAAA,CACED,UAAU,uDACVE,QAASJ,EAAkBJ,SAC5B,mBAAA,CAEO,CAAC,CAAA,CACN,CAAC,CAAA,CACH,EClCHS,EAAcA,CAAC,CAAEC,OAAAA,CAAyB,IAAM,CAChD,GAAA,CAACA,EAAOC,OACH,OAAA,KAGT,MAAMC,EAAUF,EAAOG,IAAKC,GAC1BT,EAAA,MAAA,CAAiBC,UAAU,yBAAwBN,UACjDO,EAAA,QAAA,CAAOQ,KAAK,WAAWC,MAAM,UAAA,CAAY,EACzCT,EAAA,QAAA,CAAOD,UAAU,qBAAoBN,SAAEc,CAAAA,CAAa,CAAC,CAAA,EAF7CA,CAGL,CACN,EAED,OAAOP,EAAA,MAAA,CAAAP,SAAMY,CAAAA,CAAa,CAC5B,ECDMK,EAAgBC,GAChBA,EAAKH,OAAS,SACTG,EAAKC,KAAOC,EAAwBA,EAGtCA,EAGHC,EAAcA,CAAC,CACnBH,KAAAA,EACAf,cAAAA,EACAC,kBAAAA,CACgB,IAAM,CACtB,IAAIkB,EAAyB,KAI7B,OAFkBL,EAAaC,CAAI,EAElB,CACf,IAAKE,GACHE,EACEf,EAACE,EAAW,CAACC,OAAQQ,EAAKC,IAAAA,CAAgC,EAE5D,KACJ,CAEA,OACEZ,EAACR,EAAQ,CACPE,MAAOiB,EAAKjB,MACZC,SAAUgB,EAAKhB,SACfC,cAAAA,EACAC,kBAAAA,EAAqCJ,SAErCO,EAAA,MAAA,CAAAP,SAAMsB,CAAAA,CAA4B,CAAA,CAC1B,CAEd,ECvCA,MAAMC,EAAoBA,CAAC,CAAEC,SAAAA,EAAUN,KAAAA,CAAwB,IAAM,CACnE,KAAM,CAACO,EAAYC,CAAa,EAC9BC,EAAyC,EAErC,CAACC,EAAcC,CAAe,EAAIF,EAAS,CAAC,EAclD,GAZAG,EAAU,IAAM,CACVZ,EACFQ,EAAcR,CAAI,EACTM,EACTO,EAASP,CAAQ,EAAEQ,KAAMd,GAAS,CAChCQ,EAAcR,CAAI,CAAA,CACnB,EAEDQ,EAAc,IAAI,CAEnB,EAAA,CAACA,EAAeF,EAAUN,CAAI,CAAC,EAE9B,CAACO,EACI,OAAA,KAGHQ,MAAAA,EAAeC,EACnB,IAAMC,OAAOC,KAAKX,EAAWY,UAAU,EACvC,CAACZ,CAAU,CACb,EAEMa,EAAoBA,IAAM,CAC1B,CAACb,GAAcG,GAAgB,GAKnCC,EAAgBD,EAAe,CAAC,CAAA,EAG5BW,EAAwBA,IAAM,CAC9B,CAACd,GAAcG,GAAgBK,EAAatB,OAAS,GAKzDkB,EAAgBD,EAAe,CAAC,CAAA,EAGlC,OACErB,EAACc,EAAW,CACVH,KAAMO,EAAWY,WAAWJ,EAAaL,CAAY,CAAC,EACtDzB,cAAemC,EACflC,kBAAmBmC,CAAAA,CACpB,CAEL,EAEAC,EAAejB;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}