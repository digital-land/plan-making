{"version":3,"file":"PolicyForm.stories-df0b534a.js","sources":["../../src/components/policyForm/constants.ts","../../src/components/policyForm/components/MultiItem.tsx","../../src/components/policyForm/PolicyForm.tsx"],"sourcesContent":["import { FormState } from \"./types\";\n\nexport const REFERENCE_KEY = \"reference\";\nexport const TITLE_KEY = \"title\";\nexport const DESCRIPTION_KEY = \"description\";\nexport const REQUIREMENTS = \"requirements\";\nexport const BOUNDARY_KEY = \"boundary\";\nexport const THEMES_KEY = \"themes\";\nexport const SUPPLEMENTARY_TEXT_KEY = \"supplementaryText\";\n\nexport const FORM_lABELS = {\n  [REFERENCE_KEY]: \"Policy number (?)\",\n  [TITLE_KEY]: \"Policy Title (?)\",\n  [DESCRIPTION_KEY]: \"Description\",\n  [REQUIREMENTS]: \"Requirements\",\n  [BOUNDARY_KEY]: \"Draw a boundary\",\n  [THEMES_KEY]: \"Themes\",\n  [SUPPLEMENTARY_TEXT_KEY]: \"Text 1.1\",\n};\n\nexport const INITIAL_FORM_STATE: FormState = {\n  [REFERENCE_KEY]: \"\",\n  [TITLE_KEY]: \"\",\n  [DESCRIPTION_KEY]: \"\",\n  [REQUIREMENTS]: [\"\"],\n  [BOUNDARY_KEY]: [],\n  [THEMES_KEY]: [],\n  [SUPPLEMENTARY_TEXT_KEY]: \"\",\n};\n\nexport const THEME_OPTIONS = [\n  { key: \"artsCultureHeritage\", label: \"Arts, Culture and Heritage\" },\n  { key: \"economy\", label: \"Economy\" },\n  { key: \"environmentAndGreenspace\", label: \"Environment and Greenspace\" },\n  { key: \"gettingAround\", label: \"Getting Around\" },\n  { key: \"livingAndHousing\", label: \"Living and Housing\" },\n  { key: \"cityLife\", label: \"City Life\" },\n];\n","interface MultiItemProps {\n  label?: string;\n  values?: ReadonlyArray<string>;\n  className?: string;\n  onChange: (values: ReadonlyArray<string>) => void;\n}\n\nconst MultiItem = ({\n  label,\n  values = [],\n  className,\n  onChange,\n}: MultiItemProps) => {\n  const handleValueChange = (index: number, newValue: string) => {\n    let newState = [...values];\n\n    newState[index] = newValue;\n\n    onChange(newState);\n  };\n\n  const handleAddClicked = () => {\n    onChange([...values, \"\"]);\n  };\n\n  const handleDeleteClicked = (index: number) => {\n    const newState = [...values];\n\n    newState.splice(index, 1);\n\n    onChange(newState);\n  };\n\n  const inputs = values.map((value, index) => {\n    return (\n      <div className=\"flex flex-row my-4\">\n        <p className=\"flex flex-col justify-center pr-2 font-bold\">{`${index}.`}</p>\n        <input\n          type=\"string\"\n          class=\"font-semibold text-base text mr-2 border-2 border-black py-1 px-2 focus:outline-offset-2 focus:outline-2 focus:outline-yellow-400\"\n          value={value}\n          onChange={(event) =>\n            handleValueChange(index, event.currentTarget.value)\n          }\n        />\n        <button\n          className=\"bg-red-700 hover:bg-red-800 text-white py-1 px-2\"\n          type=\"button\"\n          onClick={() => handleDeleteClicked(index)}\n        >\n          Delete\n        </button>\n      </div>\n    );\n  });\n\n  const parentClass = `my-4 align-middle ${className}`;\n\n  return (\n    <div className={parentClass}>\n      <label className=\"text-xl font-bold\">{label}</label>\n      <div className=\"my-2\">{inputs}</div>\n      <button\n        className=\"bg-green-700 hover:bg-green-800 text-white py-1 px-2\"\n        type=\"button\"\n        onClick={handleAddClicked}\n      >\n        Add\n      </button>\n    </div>\n  );\n};\n\nexport default MultiItem;\n","import { useState } from \"preact/hooks\";\nimport { Input, MultiSelect, Textarea } from \"../formComponents\";\nimport MapComponent from \"../maps/MapComponent\";\nimport {\n  BOUNDARY_KEY,\n  DESCRIPTION_KEY,\n  FORM_lABELS,\n  INITIAL_FORM_STATE,\n  REFERENCE_KEY,\n  REQUIREMENTS,\n  SUPPLEMENTARY_TEXT_KEY,\n  THEMES_KEY,\n  THEME_OPTIONS,\n  TITLE_KEY,\n} from \"./constants\";\nimport { FormState, FormValue } from \"./types\";\nimport MultiItem from \"./components/MultiItem\";\n\nconst PolicyForm = () => {\n  const [formState, setFormState] = useState<FormState>(INITIAL_FORM_STATE);\n\n  const handleValueChange = (key: keyof FormState, value: FormValue) => {\n    setFormState({\n      ...formState,\n      [key]: value,\n    });\n  };\n\n  const handleFormSubmit = () => {\n    console.log(formState);\n  };\n\n  return (\n    <div>\n      <h1 className=\"my-2 text-4xl font-bold\">Create a Policy</h1>\n      <form>\n        <h2 className=\"my-8 text-3xl font-bold\">Policy details</h2>\n\n        <div className=\"my-4\">\n          <label className=\"text-xl font-bold\">{FORM_lABELS[THEMES_KEY]}</label>\n          <MultiSelect\n            className=\"mt-2\"\n            options={THEME_OPTIONS}\n            values={formState[THEMES_KEY]}\n            onChange={(value) => handleValueChange(THEMES_KEY, value)}\n          />\n        </div>\n\n        <Input\n          label={FORM_lABELS[TITLE_KEY]}\n          value={formState[TITLE_KEY]}\n          onChange={(value) => handleValueChange(TITLE_KEY, value)}\n        />\n\n        <Input\n          label={FORM_lABELS[REFERENCE_KEY]}\n          value={formState[REFERENCE_KEY]}\n          onChange={(value) => handleValueChange(REFERENCE_KEY, value)}\n        />\n\n        <h2 className=\"my-2 text-3xl font-bold\">Policy box</h2>\n\n        <Textarea\n          label={FORM_lABELS[DESCRIPTION_KEY]}\n          className=\"my-4\"\n          value={formState[DESCRIPTION_KEY]}\n          onChange={(value) => handleValueChange(DESCRIPTION_KEY, value)}\n          maxLength={350}\n        />\n\n        {/*time peroid*/}\n\n        <MultiItem\n          label={FORM_lABELS[REQUIREMENTS]}\n          values={formState[REQUIREMENTS]}\n          onChange={(value) => handleValueChange(REQUIREMENTS, value)}\n        />\n\n        <div className=\"my-4\">\n          <label className=\"text-xl font-bold\">\n            {FORM_lABELS[BOUNDARY_KEY]}\n          </label>\n          <MapComponent\n            className=\"my-1\"\n            style={{ height: \"470px\", width: \"100%\" }}\n            showDatasets={false}\n            value={formState[BOUNDARY_KEY]}\n            onChange={(value) => handleValueChange(BOUNDARY_KEY, value)}\n          />\n        </div>\n\n        <h2 className=\"my-2 text-3xl font-bold\">Supplementary text</h2>\n\n        <Textarea\n          label={FORM_lABELS[SUPPLEMENTARY_TEXT_KEY]}\n          className=\"my-4\"\n          value={formState[SUPPLEMENTARY_TEXT_KEY]}\n          onChange={(value) => handleValueChange(SUPPLEMENTARY_TEXT_KEY, value)}\n        />\n\n        <button\n          type=\"button\"\n          className=\"mt-8 bg-green-700 hover:bg-green-800 text-white py-1 px-2\"\n          onClick={handleFormSubmit}\n        >\n          Save\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default PolicyForm;\n"],"names":["REFERENCE_KEY","TITLE_KEY","DESCRIPTION_KEY","REQUIREMENTS","BOUNDARY_KEY","THEMES_KEY","SUPPLEMENTARY_TEXT_KEY","FORM_lABELS","INITIAL_FORM_STATE","THEME_OPTIONS","key","label","MultiItem","values","className","onChange","handleValueChange","index","newValue","newState","handleAddClicked","handleDeleteClicked","splice","inputs","map","value","_jsxs","children","_jsx","type","class","event","currentTarget","onClick","parentClass","PolicyForm","formState","setFormState","useState","handleFormSubmit","console","log","MultiSelect","options","Input","Textarea","maxLength","MapComponent","style","height","width","showDatasets","PolicyForm$1"],"mappings":"saAEO,MAAMA,EAAgB,YAChBC,EAAY,QACZC,EAAkB,cAClBC,EAAe,eACfC,EAAe,WACfC,EAAa,SACbC,EAAyB,oBAEzBC,EAAc,CACzB,CAACP,CAAa,EAAG,oBACjB,CAACC,CAAS,EAAG,mBACb,CAACC,CAAe,EAAG,cACnB,CAACC,CAAY,EAAG,eAChB,CAACC,CAAY,EAAG,kBAChB,CAACC,CAAU,EAAG,SACd,CAACC,CAAsB,EAAG,UAC5B,EAEaE,EAAgC,CAC3C,CAACR,CAAa,EAAG,GACjB,CAACC,CAAS,EAAG,GACb,CAACC,CAAe,EAAG,GACnB,CAACC,CAAY,EAAG,CAAC,EAAE,EACnB,CAACC,CAAY,EAAG,CAAE,EAClB,CAACC,CAAU,EAAG,CAAE,EAChB,CAACC,CAAsB,EAAG,EAC5B,EAEaG,EAAgB,CAC3B,CAAEC,IAAK,sBAAuBC,MAAO,4BAA6B,EAClE,CAAED,IAAK,UAAWC,MAAO,SAAU,EACnC,CAAED,IAAK,2BAA4BC,MAAO,4BAA6B,EACvE,CAAED,IAAK,gBAAiBC,MAAO,gBAAiB,EAChD,CAAED,IAAK,mBAAoBC,MAAO,oBAAqB,EACvD,CAAED,IAAK,WAAYC,MAAO,WAAY,CAAC,EC7BnCC,EAAYA,CAAC,CACjBD,MAAAA,EACAE,OAAAA,EAAS,CAAE,EACXC,UAAAA,EACAC,SAAAA,CACc,IAAM,CACdC,MAAAA,EAAoBA,CAACC,EAAeC,IAAqB,CACzDC,IAAAA,EAAW,CAAC,GAAGN,CAAM,EAEzBM,EAASF,CAAK,EAAIC,EAElBH,EAASI,CAAQ,CAAA,EAGbC,EAAmBA,IAAM,CAC7BL,EAAS,CAAC,GAAGF,EAAQ,EAAE,CAAC,CAAA,EAGpBQ,EAAuBJ,GAAkB,CACvCE,MAAAA,EAAW,CAAC,GAAGN,CAAM,EAElBS,EAAAA,OAAOL,EAAO,CAAC,EAExBF,EAASI,CAAQ,CAAA,EAGbI,EAASV,EAAOW,IAAI,CAACC,EAAOR,IAE9BS,EAAA,MAAA,CAAKZ,UAAU,qBAAoBa,UACjCC,EAAA,IAAA,CAAGd,UAAU,8CAA6Ca,SAAG,GAAEV,CAAM,GAAA,CAAM,EAC3EW,EAAA,QAAA,CACEC,KAAK,SACLC,MAAM,oIACNL,MAAAA,EACAV,SACEC,GAAAA,EAAkBC,EAAOc,EAAMC,cAAcP,KAAK,CAAA,CAErD,EACDG,EAAA,SAAA,CACEd,UAAU,mDACVe,KAAK,SACLI,QAASA,IAAMZ,EAAoBJ,CAAK,EAAEU,SAC3C,QAAA,CAEO,CAAC,CAAA,CACN,CAER,EAEKO,EAAe,qBAAoBpB,CAAU,GAEnD,OACEY,EAAA,MAAA,CAAKZ,UAAWoB,EAAYP,UAC1BC,EAAA,QAAA,CAAOd,UAAU,oBAAmBa,SAAEhB,CAAAA,CAAa,EACnDiB,EAAA,MAAA,CAAKd,UAAU,OAAMa,SAAEJ,CAAAA,CAAY,EACnCK,EAAA,SAAA,CACEd,UAAU,uDACVe,KAAK,SACLI,QAASb,EAAiBO,SAC3B,KAAA,CAEO,CAAC,CAAA,CACN,CAET,ECrDMQ,EAAaA,IAAM,CACvB,KAAM,CAACC,EAAWC,CAAY,EAAIC,EAAoB9B,CAAkB,EAElEQ,EAAoBA,CAACN,EAAsBe,IAAqB,CACvDY,EAAA,CACX,GAAGD,EACH,CAAC1B,CAAG,EAAGe,CAAAA,CACR,CAAA,EAGGc,EAAmBA,IAAM,CAC7BC,QAAQC,IAAIL,CAAS,CAAA,EAGvB,OACEV,EAAA,MAAA,CAAAC,UACEC,EAAA,KAAA,CAAId,UAAU,0BAAyBa,SAAC,iBAAA,CAAmB,EAC3DD,EAAA,OAAA,CAAAC,UACEC,EAAA,KAAA,CAAId,UAAU,0BAAyBa,SAAC,gBAAA,CAAkB,EAE1DD,EAAA,MAAA,CAAKZ,UAAU,OAAMa,UACnBC,EAAA,QAAA,CAAOd,UAAU,oBAAmBa,SAAEpB,EAAYF,CAAU,CAAA,CAAS,EACrEuB,EAACc,EAAW,CACV5B,UAAU,OACV6B,QAASlC,EACTI,OAAQuB,EAAU/B,CAAU,EAC5BU,SAAWU,GAAUT,EAAkBX,EAAYoB,CAAK,CAAA,CACzD,CAAC,CAAA,CACC,EAELG,EAACgB,EAAK,CACJjC,MAAOJ,EAAYN,CAAS,EAC5BwB,MAAOW,EAAUnC,CAAS,EAC1Bc,SAAWU,GAAUT,EAAkBf,EAAWwB,CAAK,CAAA,CACxD,EAEDG,EAACgB,EAAK,CACJjC,MAAOJ,EAAYP,CAAa,EAChCyB,MAAOW,EAAUpC,CAAa,EAC9Be,SAAWU,GAAUT,EAAkBhB,EAAeyB,CAAK,CAAA,CAC5D,EAEDG,EAAA,KAAA,CAAId,UAAU,0BAAyBa,SAAC,YAAA,CAAc,EAEtDC,EAACiB,EAAQ,CACPlC,MAAOJ,EAAYL,CAAe,EAClCY,UAAU,OACVW,MAAOW,EAAUlC,CAAe,EAChCa,SAAWU,GAAUT,EAAkBd,EAAiBuB,CAAK,EAC7DqB,UAAW,GAAA,CACZ,EAIDlB,EAAChB,EAAS,CACRD,MAAOJ,EAAYJ,CAAY,EAC/BU,OAAQuB,EAAUjC,CAAY,EAC9BY,SAAWU,GAAUT,EAAkBb,EAAcsB,CAAK,CAAA,CAC3D,EAEDC,EAAA,MAAA,CAAKZ,UAAU,OAAMa,UACnBC,EAAA,QAAA,CAAOd,UAAU,oBAAmBa,SACjCpB,EAAYH,CAAY,CAAA,CACpB,EACPwB,EAACmB,EAAY,CACXjC,UAAU,OACVkC,MAAO,CAAEC,OAAQ,QAASC,MAAO,MAAO,EACxCC,aAAc,GACd1B,MAAOW,EAAUhC,CAAY,EAC7BW,SAAWU,GAAUT,EAAkBZ,EAAcqB,CAAK,CAAA,CAC3D,CAAC,CAAA,CACC,EAELG,EAAA,KAAA,CAAId,UAAU,0BAAyBa,SAAC,oBAAA,CAAsB,EAE9DC,EAACiB,EAAQ,CACPlC,MAAOJ,EAAYD,CAAsB,EACzCQ,UAAU,OACVW,MAAOW,EAAU9B,CAAsB,EACvCS,SAAWU,GAAUT,EAAkBV,EAAwBmB,CAAK,CAAA,CACrE,EAEDG,EAAA,SAAA,CACEC,KAAK,SACLf,UAAU,4DACVmB,QAASM,EAAiBZ,SAC3B,MAAA,CAEO,CAAC,CAAA,CACL,CAAC,CAAA,CACJ,CAET,EAEAyB,EAAejB;;"}