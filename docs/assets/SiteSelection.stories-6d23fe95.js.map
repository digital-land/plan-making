{"version":3,"file":"SiteSelection.stories-6d23fe95.js","sources":["../../src/components/siteSelectionForm/components/MultiSelect.tsx","../../src/components/siteSelectionForm/components/Input.tsx","../../src/components/siteSelectionForm/components/RadioButtons.tsx","../../src/components/siteSelectionForm/components/DynamicForm.tsx","../../src/components/siteSelectionForm/components/FormPage.tsx","../../src/components/siteSelectionForm/SiteSelectionForm.tsx"],"sourcesContent":["interface MultiSelectProps {\n  options: ReadonlyArray<string>;\n  values?: Record<string, boolean>;\n  onChange: (values: Record<string, boolean>) => void;\n}\n\nconst MultiSelect = ({ options, values = {}, onChange }: MultiSelectProps) => {\n  if (!options.length) {\n    return null;\n  }\n\n  const handleChange = (key: string, value: boolean) => {\n    onChange({\n      ...values,\n      [key]: value,\n    });\n  };\n\n  const optionComponents = options.map((key) => (\n    <div key={key} className=\"flex items-center mb-4\">\n      <label className=\"font-semibold flex\">\n        <input\n          type=\"checkbox\"\n          class=\"checkbox mr-2\"\n          checked={values[key]}\n          onClick={() => handleChange(key, !values[key])}\n        />\n        <span>{key}</span>\n      </label>\n    </div>\n  ));\n\n  return <div>{optionComponents}</div>;\n};\n\nexport default MultiSelect;\n","interface InputProps<T> {\r\n  value: T;\r\n  type: string;\r\n  step?: string;\r\n  min?: string;\r\n  max?: string;\r\n  onChange: (value: T) => void;\r\n}\r\n\r\nconst Input = <T extends number | string>({\r\n  value,\r\n  type,\r\n  step,\r\n  min,\r\n  max,\r\n  onChange,\r\n}: InputProps<T>) => {\r\n  const InputBox = (\r\n    <div className=\"flex items-center mb-4\">\r\n      <label className=\"font-semibold flex\">\r\n        <input\r\n          type={type}\r\n          class=\"text mr-2\"\r\n          value={value}\r\n          onChange={(event) => onChange(event.currentTarget.value as T)}\r\n          step={step}\r\n          min={min}\r\n          max={max}\r\n        />\r\n      </label>\r\n    </div>\r\n  );\r\n\r\n  return <div>{InputBox}</div>;\r\n};\r\n\r\nexport default Input;\r\n","interface RadioButtonsProps {\r\n  name: string;\r\n  options: ReadonlyArray<string>;\r\n  value: String;\r\n  onChange: (values: string) => void;\r\n}\r\n\r\nconst RadioButtons = ({\r\n  name,\r\n  options,\r\n  value,\r\n  onChange,\r\n}: RadioButtonsProps) => {\r\n  if (!options.length) {\r\n    return null;\r\n  }\r\n\r\n  const optionComponents = options.map((key) => (\r\n    <div key={key} className=\"flex items-center mb-4\">\r\n      <label className=\"font-semibold flex\">\r\n        <input\r\n          type=\"radio\"\r\n          class=\"radio mr-2\"\r\n          name={name}\r\n          checked={value === key}\r\n          onClick={() => onChange(key)}\r\n        />\r\n        <span>{key}</span>\r\n      </label>\r\n    </div>\r\n  ));\r\n\r\n  return <div>{optionComponents}</div>;\r\n};\r\n\r\nexport default RadioButtons;\r\n","import { useMemo } from \"preact/hooks\";\nimport { FormPageSchema, FormValue } from \"../types\";\nimport MultiSelect from \"./MultiSelect\";\nimport { JSXInternal } from \"node_modules/preact/src/jsx\";\nimport Input from \"./Input\";\nimport RadioButtons from \"./RadioButtons\";\n\ninterface DynamicFormProps {\n  id: string;\n  formPageSchema: FormPageSchema;\n  value: FormValue;\n  onFormValueChange: (id: string, value: FormValue) => void;\n}\n\nenum InputType {\n  TextInput,\n  NumberInput,\n  RadioInput,\n  MultiSelect,\n  None,\n}\n\nconst getInputType = (formPageSchema: FormPageSchema) => {\n  if (formPageSchema.type === \"string\") {\n    return formPageSchema.enum ? InputType.MultiSelect : InputType.TextInput;\n  }\n  if (formPageSchema.type === \"number\") {\n    return InputType.NumberInput;\n  }\n  if (formPageSchema.type === \"radio\") {\n    return InputType.RadioInput;\n  }\n\n  return InputType.None;\n};\n\nconst DynamicForm = ({\n  id,\n  formPageSchema,\n  value,\n  onFormValueChange,\n}: DynamicFormProps) => {\n  let questionInputComponent: JSXInternal.Element | null = null;\n\n  const inputType = useMemo(\n    () => getInputType(formPageSchema),\n    [formPageSchema],\n  );\n\n  const handleFormValueChange = (newValue: FormValue) => {\n    onFormValueChange(id, newValue);\n  };\n\n  switch (inputType) {\n    case InputType.MultiSelect:\n      questionInputComponent = (\n        <MultiSelect\n          options={formPageSchema.enum as ReadonlyArray<string>}\n          values={value as Record<string, boolean>}\n          onChange={handleFormValueChange}\n        />\n      );\n      break;\n    case InputType.TextInput:\n      questionInputComponent = (\n        <Input\n          type={formPageSchema.type}\n          value={(value as string) ?? \"\"}\n          onChange={handleFormValueChange}\n        />\n      );\n\n      break;\n    case InputType.NumberInput:\n      questionInputComponent = (\n        <Input\n          type={formPageSchema.type}\n          value={(value as number) ?? 0}\n          step={formPageSchema.step}\n          min={formPageSchema.min}\n          max={formPageSchema.max}\n          onChange={handleFormValueChange}\n        />\n      );\n\n      break;\n\n    case InputType.RadioInput:\n      questionInputComponent = (\n        <RadioButtons\n          name={formPageSchema.title}\n          options={formPageSchema.enum as ReadonlyArray<string>}\n          value={value as String}\n          onChange={handleFormValueChange}\n        />\n      );\n      break;\n  }\n\n  return <form>{questionInputComponent}</form>;\n};\n\nexport default DynamicForm;\n","import { ComponentChildren } from \"preact\";\n\ninterface FormPageProps {\n  children?: ComponentChildren;\n  title: string;\n  subtitle?: string;\n  onBackClicked: () => void;\n  onContinueClicked: () => void;\n}\n\nconst FormPage = ({\n  children,\n  title,\n  subtitle,\n  onBackClicked,\n  onContinueClicked,\n}: FormPageProps) => {\n  return (\n    <div>\n      <div className=\"form-page-header mb-4\">\n        <h1 className=\"my-2 text-4xl font-bold\">{title}</h1>\n        {subtitle && <p>{subtitle}</p>}\n      </div>\n      <div className=\"form-page-body mb-4\">{children}</div>\n      <div className=\"form-page-footer mt-10 flex space-x-6\">\n        <button\n          className=\"bg-gray-200 hover:bg-gray-300 text-black py-1 px-2\"\n          onClick={onBackClicked}\n        >\n          Back\n        </button>\n        <button\n          className=\"bg-green-700 hover:bg-green-800 text-white py-1 px-2\"\n          onClick={onContinueClicked}\n        >\n          Save and continue\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default FormPage;\n","import { useState, useEffect, useMemo } from \"preact/hooks\";\nimport { loadJson } from \"../../utils\";\nimport DynamicForm from \"./components/DynamicForm\";\nimport { FormState, FormValue, SiteSelectionFormSchema } from \"./types\";\n\nimport \"./SiteSelectionForm.css\";\nimport FormPage from \"./components/FormPage\";\n\ninterface SiteSelectionForm {\n  filepath?: string;\n  data?: SiteSelectionFormSchema;\n}\n\nconst SiteSelectionForm = ({ filepath, data }: SiteSelectionForm) => {\n  const [formSchema, setFormSchema] =\n    useState<SiteSelectionFormSchema | null>();\n\n  const [formData, setFormData] = useState<FormState>({});\n\n  const [currentPage, setCurrentPage] = useState(0);\n\n  useEffect(() => {\n    if (data) {\n      setFormSchema(data);\n    } else if (filepath) {\n      loadJson(filepath).then((data) => {\n        setFormSchema(data);\n      });\n    } else {\n      setFormSchema(null);\n    }\n  }, [setFormSchema, filepath, data]);\n\n  if (!formSchema) {\n    return null;\n  }\n\n  const propertyKeys = useMemo(\n    () => Object.keys(formSchema.properties),\n    [formSchema],\n  );\n\n  const currentPageId = useMemo(\n    () => propertyKeys[currentPage],\n    [propertyKeys, currentPage],\n  );\n\n  const handleBackClicked = () => {\n    if (!formSchema || currentPage <= 0) {\n      // TODO handle error here, button shouldnt be displayed too\n      return;\n    }\n\n    setCurrentPage(currentPage - 1);\n  };\n\n  const handleContinueClicked = () => {\n    if (!formSchema || currentPage >= propertyKeys.length - 1) {\n      // TODO handle error here, button shouldnt be displayed too\n      return;\n    }\n\n    setCurrentPage(currentPage + 1);\n  };\n\n  const handleFormValueChange = (id: string, value: FormValue) => {\n    const newState = {\n      ...formData,\n      [id]: value,\n    };\n\n    setFormData(newState);\n  };\n\n  return (\n    <FormPage\n      title={formSchema.properties[currentPageId].title}\n      subtitle={formSchema.properties[currentPageId].subtitle}\n      onBackClicked={handleBackClicked}\n      onContinueClicked={handleContinueClicked}\n    >\n      <DynamicForm\n        id={currentPageId}\n        formPageSchema={formSchema.properties[currentPageId]}\n        value={formData[currentPageId]}\n        onFormValueChange={handleFormValueChange}\n      />\n    </FormPage>\n  );\n};\n\nexport default SiteSelectionForm;\n"],"names":["MultiSelect","options","values","onChange","length","handleChange","key","value","optionComponents","map","_jsx","className","children","_jsxs","type","class","checked","onClick","Input","step","min","max","InputBox","event","currentTarget","RadioButtons","name","getInputType","formPageSchema","enum","InputType","DynamicForm","id","onFormValueChange","questionInputComponent","inputType","useMemo","handleFormValueChange","newValue","title","FormPage","subtitle","onBackClicked","onContinueClicked","SiteSelectionForm","filepath","data","formSchema","setFormSchema","useState","formData","setFormData","currentPage","setCurrentPage","useEffect","loadJson","then","propertyKeys","Object","keys","properties","currentPageId","handleBackClicked","handleContinueClicked","newState","SiteSelection"],"mappings":"6LAMA,MAAMA,EAAcA,CAAC,CAAEC,QAAAA,EAASC,OAAAA,EAAS,CAAC,EAAGC,SAAAA,CAA2B,IAAM,CACxE,GAAA,CAACF,EAAQG,OACJ,OAAA,KAGHC,MAAAA,EAAeA,CAACC,EAAaC,IAAmB,CAC3CJ,EAAA,CACP,GAAGD,EACH,CAACI,CAAG,EAAGC,CAAAA,CACR,CAAA,EAGGC,EAAmBP,EAAQQ,IAAKH,GACpCI,EAAA,MAAA,CAAeC,UAAU,yBAAwBC,SAC/CC,EAAA,QAAA,CAAOF,UAAU,qBAAoBC,UACnCF,EAAA,QAAA,CACEI,KAAK,WACLC,MAAM,gBACNC,QAASd,EAAOI,CAAG,EACnBW,QAASA,IAAMZ,EAAaC,EAAK,CAACJ,EAAOI,CAAG,CAAC,CAAA,CAC9C,EACDI,EAAA,OAAA,CAAAE,SAAON,CAAAA,CAAU,CAAC,CAAA,CACb,CAAA,EATCA,CAUL,CACN,EAED,OAAOI,EAAA,MAAA,CAAAE,SAAMJ,CAAAA,CAAsB,CACrC,ECxBMU,EAAQ,CAA4B,CACxCX,MAAAA,EACAO,KAAAA,EACAK,KAAAA,EACAC,IAAAA,EACAC,IAAAA,EACAlB,SAAAA,CACa,IAAM,CACbmB,MAAAA,EACJZ,EAAA,MAAA,CAAKC,UAAU,yBAAwBC,SACrCF,EAAA,QAAA,CAAOC,UAAU,qBAAoBC,SACnCF,EAAA,QAAA,CACEI,KAAAA,EACAC,MAAM,YACNR,MAAAA,EACAJ,SAAWoB,GAAUpB,EAASoB,EAAMC,cAAcjB,KAAY,EAC9DY,KAAAA,EACAC,IAAAA,EACAC,IAAAA,CAAAA,CACD,CAAA,CACI,CAAA,CACJ,EAGP,OAAOX,EAAA,MAAA,CAAAE,SAAMU,CAAAA,CAAc,CAC7B,EC3BMG,EAAeA,CAAC,CACpBC,KAAAA,EACAzB,QAAAA,EACAM,MAAAA,EACAJ,SAAAA,CACiB,IAAM,CACnB,GAAA,CAACF,EAAQG,OACJ,OAAA,KAGT,MAAMI,EAAmBP,EAAQQ,IAAKH,GACpCI,EAAA,MAAA,CAAeC,UAAU,yBAAwBC,SAC/CC,EAAA,QAAA,CAAOF,UAAU,qBAAoBC,UACnCF,EAAA,QAAA,CACEI,KAAK,QACLC,MAAM,aACNW,KAAAA,EACAV,QAAST,IAAUD,EACnBW,QAASA,IAAMd,EAASG,CAAG,CAAA,CAC5B,EACDI,EAAA,OAAA,CAAAE,SAAON,CAAAA,CAAU,CAAC,CAAA,CACb,CAAA,EAVCA,CAWL,CACN,EAED,OAAOI,EAAA,MAAA,CAAAE,SAAMJ,CAAAA,CAAsB,CACrC,ECXMmB,EAAgBC,GAChBA,EAAed,OAAS,SACnBc,EAAeC,KAAOC,EAAwBA,EAEnDF,EAAed,OAAS,SACnBgB,EAELF,EAAed,OAAS,QACnBgB,EAGFA,EAGHC,EAAcA,CAAC,CACnBC,GAAAA,EACAJ,eAAAA,EACArB,MAAAA,EACA0B,kBAAAA,CACgB,IAAM,CACtB,IAAIC,EAAqD,KAEnDC,MAAAA,EAAYC,EAChB,IAAMT,EAAaC,CAAc,EACjC,CAACA,CAAc,CACjB,EAEMS,EAAyBC,GAAwB,CACrDL,EAAkBD,EAAIM,CAAQ,CAAA,EAGhC,OAAQH,EAAS,CACf,IAAKL,GACHI,EACExB,EAACV,EAAW,CACVC,QAAS2B,EAAeC,KACxB3B,OAAQK,EACRJ,SAAUkC,CAAAA,CACX,EAEH,MACF,IAAKP,GACHI,EACExB,EAACQ,EAAK,CACJJ,KAAMc,EAAed,KACrBP,MAAQA,GAAoB,GAC5BJ,SAAUkC,CAAAA,CACX,EAGH,MACF,IAAKP,GACHI,EACExB,EAACQ,EAAK,CACJJ,KAAMc,EAAed,KACrBP,MAAQA,GAAoB,EAC5BY,KAAMS,EAAeT,KACrBC,IAAKQ,EAAeR,IACpBC,IAAKO,EAAeP,IACpBlB,SAAUkC,CAAAA,CACX,EAGH,MAEF,IAAKP,GACHI,EACExB,EAACe,EAAY,CACXC,KAAME,EAAeW,MACrBtC,QAAS2B,EAAeC,KACxBtB,MAAAA,EACAJ,SAAUkC,CAAAA,CACX,EAEH,KACJ,CAEA,OAAO3B,EAAA,OAAA,CAAAE,SAAOsB,CAAAA,CAA6B,CAC7C,EC1FA,MAAMM,EAAWA,CAAC,CAChB5B,SAAAA,EACA2B,MAAAA,EACAE,SAAAA,EACAC,cAAAA,EACAC,kBAAAA,CACa,IAEX9B,EAAA,MAAA,CAAAD,UACEC,EAAA,MAAA,CAAKF,UAAU,wBAAuBC,UACpCF,EAAA,KAAA,CAAIC,UAAU,0BAAyBC,SAAE2B,CAAAA,CAAU,EAClDE,GAAY/B,EAAA,IAAA,CAAAE,SAAI6B,CAAAA,CAAY,CAAC,CAAA,CAC3B,EACL/B,EAAA,MAAA,CAAKC,UAAU,sBAAqBC,SAAAA,CAAAA,CAAgB,EACpDC,EAAA,MAAA,CAAKF,UAAU,wCAAuCC,UACpDF,EAAA,SAAA,CACEC,UAAU,qDACVM,QAASyB,EAAc9B,SACxB,MAAA,CAEO,EACRF,EAAA,SAAA,CACEC,UAAU,uDACVM,QAAS0B,EAAkB/B,SAC5B,mBAAA,CAEO,CAAC,CAAA,CACN,CAAC,CAAA,CACH,ECzBHgC,EAAoBA,CAAC,CAAEC,SAAAA,EAAUC,KAAAA,CAAwB,IAAM,CACnE,KAAM,CAACC,EAAYC,CAAa,EAC9BC,EAAyC,EAErC,CAACC,EAAUC,CAAW,EAAIF,EAAoB,CAAE,CAAA,EAEhD,CAACG,EAAaC,CAAc,EAAIJ,EAAS,CAAC,EAchD,GAZAK,EAAU,IAAM,CACVR,EACFE,EAAcF,CAAI,EACTD,EACTU,EAASV,CAAQ,EAAEW,KAAMV,GAAS,CAChCE,EAAcF,CAAI,CAAA,CACnB,EAEDE,EAAc,IAAI,CAEnB,EAAA,CAACA,EAAeH,EAAUC,CAAI,CAAC,EAE9B,CAACC,EACI,OAAA,KAGHU,MAAAA,EAAerB,EACnB,IAAMsB,OAAOC,KAAKZ,EAAWa,UAAU,EACvC,CAACb,CAAU,CACb,EAEMc,EAAgBzB,EACpB,IAAMqB,EAAaL,CAAW,EAC9B,CAACK,EAAcL,CAAW,CAC5B,EAEMU,EAAoBA,IAAM,CAC1B,CAACf,GAAcK,GAAe,GAKlCC,EAAeD,EAAc,CAAC,CAAA,EAG1BW,EAAwBA,IAAM,CAC9B,CAAChB,GAAcK,GAAeK,EAAarD,OAAS,GAKxDiD,EAAeD,EAAc,CAAC,CAAA,EAG1Bf,EAAwBA,CAACL,EAAYzB,IAAqB,CAC9D,MAAMyD,EAAW,CACf,GAAGd,EACH,CAAClB,CAAE,EAAGzB,CAAAA,EAGR4C,EAAYa,CAAQ,CAAA,EAGtB,OACEtD,EAAC8B,EAAQ,CACPD,MAAOQ,EAAWa,WAAWC,CAAa,EAAEtB,MAC5CE,SAAUM,EAAWa,WAAWC,CAAa,EAAEpB,SAC/CC,cAAeoB,EACfnB,kBAAmBoB,EAAsBnD,SAEzCF,EAACqB,EAAW,CACVC,GAAI6B,EACJjC,eAAgBmB,EAAWa,WAAWC,CAAa,EACnDtD,MAAO2C,EAASW,CAAa,EAC7B5B,kBAAmBI,CAAAA,CACpB,CAAA,CACO,CAEd,EAEA4B,EAAerB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}